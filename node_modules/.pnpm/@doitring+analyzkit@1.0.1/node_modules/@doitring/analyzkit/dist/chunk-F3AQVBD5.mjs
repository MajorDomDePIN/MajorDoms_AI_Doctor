import{a as H,b as v,c as b,d,e as g,j as M}from"./chunk-IH6YSG65.mjs";var q={};H(q,{oxygens:()=>P,rates:()=>_,sleeps:()=>j,steps:()=>N});var x={};H(x,{average:()=>I,deeps:()=>T,duration:()=>F,light:()=>w});import h from"dayjs";import D from"dayjs/plugin/duration";import y from"dayjs/plugin/customParseFormat";h.extend(y);h.extend(D);function F(e){if(!e)return 0;let n=e/3600,t=100-Math.abs(n-8)*10;return t=Math.max(t,0),t}function T(e){let t=100;if(e>=5760&&e<=11520)return t;if(e<5760){let i=(5760-e)/5760*100;t-=Math.ceil(i/10)*10}else if(e>11520){let i=(e-11520)/11520*100;t-=Math.ceil(i/10)*10}return t<0?0:t}function w(e){let t=100;if(e>=17280&&e<=23040)return t;if(e<17280){let i=(17280-e)/17280*100;t-=Math.ceil(i/10)*10}else if(e>23040){let i=(e-23040)/23040*100;t-=Math.ceil(i/10)*10}return t<0?0:t}function I(e,n){let m=n.map(s=>s||0).map(s=>h.unix(s).format("HH:mm")).map(s=>s.split(":").map(Number)).map(s=>h.duration({hours:s[0],minutes:s[1]})).map(s=>s.format("HH:mm")),o=h(e,"HH:mm"),i=m.map(s=>{let r=h(s,"HH:mm").diff(o,"minute");return r<-12*60&&(r+=24*60),r>12*60&&(r-=24*60),r}).reduce((s,a)=>s+a,0)/m.length;return o.add(i,"minute").format("HH:mm")}function j(e){let n={dep:e.filter(a=>a.value===1).length*60,lig:e.filter(a=>a.value===2).length*60,rem:e.filter(a=>a.value===3).length*60,act:e.filter(a=>a.value<=3).length*60,tol:e.length*60},m=28800,o={dep:v(m,n.dep,0),lig:v(m,n.lig,0),rem:v(m,n.rem,0)},t={lig:x.light(n.lig),dep:x.deeps(n.dep),dur:x.duration(n.act)},i=+d([t.dep,t.dur,t.lig]).toFixed(0),s={com:g([i>85,"high"],[i>60,"normal"],[i>0,"low"]),dep:g([o.dep>20&&o.dep<40,"normal"],[o.dep<20,"low"],[o.dep>40,"high"]),lig:g([o.lig>60&&o.lig<80,"normal"],[o.lig<60,"low"],[o.lig>80,"high"]),rem:g([o.rem>10&&o.rem<30,"normal"],[o.rem<10,"low"],[o.rem>30,"high"])};return{durations:n,percents:o,scores:t,score:i,evals:s}}function N(e,n=1e4){let{kcal:m,km:o,total:t}=r(e),i=v(n,t,0),s=g([i>90,"high"],[i<50,"low"],[!0,"lack"]),a=M(e).map(l=>({...r(l.data),...l}));function r(l){let u=+b(l.map(f=>f.kcal))/100,p=+b(l.map(f=>f.km))/100,c=l.map(f=>f.value).reduce((f,k)=>f+k,0);return{kcal:u.toFixed(2),km:p.toFixed(2),total:c}}return{eval:s,kcal:m,km:o,total:t,score:i,hours:a}}function P(e){e=e.filter(r=>!!r.value);let{average:n,min:m,max:o}=a(e),t=n>=95?100:n>=80?60:20,i=g([n>=95,"normal"],[n>=80,"abnormal"],[!0,"danger"]),s=M(e).map(r=>({...a(r.data),...r}));function a(r){let l=d(r.map(c=>c.value)),u=Math.min(...r.map(c=>c.value)),p=Math.max(...r.map(c=>c.value));return{average:+l.toFixed(2),min:Math.abs(u)===1/0?0:u,max:Math.abs(p)===1/0?0:p}}return{score:e.length?t:0,hours:s,eval:i,average:n,min:m,max:o}}function _(e){let{average:n,min:m,max:o}=a(e),t=e.length?100:0,i=n>25&&n<200?"normal":"abnormal",s=M(e,1800).map(r=>({...a(r.data),...r}));function a(r){let l=d(r.map(c=>c.value)),u=Math.min(...r.map(c=>c.value)),p=Math.max(...r.map(c=>c.value));return{average:+l.toFixed(0),min:Math.abs(u)===1/0?0:u,max:Math.abs(p)===1/0?0:p}}return{eval:i,average:n,hours:s,min:m,max:o,score:t}}export{x as a,j as b,N as c,P as d,_ as e,q as f};
