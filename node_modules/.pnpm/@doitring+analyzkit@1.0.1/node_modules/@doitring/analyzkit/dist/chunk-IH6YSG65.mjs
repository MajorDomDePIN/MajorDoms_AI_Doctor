var v=Object.defineProperty;var b=(n,t)=>{for(var e in t)v(n,e,{get:t[e],enumerable:!0})};var R={};b(R,{daily:()=>U,day:()=>O,diff:()=>A,diffs:()=>w,fills:()=>k,hours:()=>j,month:()=>S,time:()=>l,week:()=>E});import f from"dayjs";var _={};b(_,{arange:()=>p,average:()=>F,format:()=>D,formatEther:()=>T,formatEtherByFormat:()=>H,getTimePoints:()=>M,gte:()=>y,lt:()=>x,parse:()=>Y,percentage:()=>B,plus:()=>V,riposte:()=>I});import c from"bignumber.js";import{formatEther as N}from"ethers-v5/lib/utils";function B(n,t,e=3){return+n==0||+t==0?0:+new c(t||"0").div(n||"0").times(100).toFixed(e,c.ROUND_DOWN)}function V(n){return n.filter(t=>typeof t<"u").reduce((t,e)=>t.plus(e),new c(0)).toFixed(0)}function H(n,t=3){return n?D(T(n),t):"0.00"}function T(n="0"){let t=n.toFixed?.(0)||n.toString?.()||n;return N(new c(t==="NaN"?0:t).toFixed(0))}function D(n="0",t=3){let e=Y(n);return`${new c(n).div(e.v).toFormat(t)}${e.n}`}function y(n,t){return new c(n).gte(t)}function x(n,t){return new c(n).lt(t)}function Y(n){let t;for(let e of P){let a=e(new c(n).toFixed(0));a&&(t=a)}return t||{v:1,d:0,n:""}}function F(n){return n.length===0?0:n.reduce((t,e)=>t+e,0)/n.length}var d={t:{v:10**12,d:13,n:"t"},b:{v:10**9,d:10,n:"b"},m:{v:10**6,d:7,n:"m"}},P=[n=>y(n,d.t.v)&&d.t,n=>y(n,d.b.v)&&x(n,d.t.v)&&d.b,n=>y(n,d.m.v)&&x(n,d.b.v)&&d.m];function I(...n){for(let[t,e]of n)if(t)return e}function p(n,t,e=1,a=[],r=a.length){t||(n-=t=n);for(let u=r+Math.max(Math.ceil((++t-n)/e),0);r<u;n+=e)a[r++]=n;return a}import h from"dayjs";function M(n){let t=[],e=h().startOf("day"),a=h().endOf("day"),r=e;for(;r.isBefore(a)||r.isSame(a,"minute");)t.push(r.format("HH:mm")),r=r.add(n,"second");return t}function O(n,t,e){let a=l(n,t,"d",e),r=f.unix(n).format("MM/DD"),u=f.unix(n).format("YYYY-MM-DD");return{date:n,data:a,day:r,ytd:u}}function E(n,t,e){return l(n,t,"w",e)}function S(n,t,e){return l(n,t,"M",e)}function j(n,t=3600){let e=n[n.length-1],a=n[0],r=[f.unix(a?.date||0).startOf("d").unix(),f.unix(e?.date||0).endOf("d").unix()];return p(r[0],r[1],t).map(u=>{let s=f.unix(u),o=n.filter(i=>i.date>u&&i.date<u+t);return{hour:s.format("HH:mm"),time:s,data:o}})}function U(n){return[...new Set([...n.map(G)])].map(t=>f(t,"YYYY-MM-DD").unix()).map(t=>O(t,n))}function k(n,t,e,a){let r={h:"hour",w:"day",M:"day"}[e],u=new Map,s=[];if(e==="h"){let o=f(t[0].hour,"HH:mm"),i=f(t[1].hour,"HH:mm");s=M(i.diff(o,"seconds")).map(m=>({[r]:m}))}if(e==="M"){let o=f.unix(n),i=o.daysInMonth();s=p(1,i).map(m=>o.date(m)).map(m=>({[r]:m.format("MM/DD"),ytd:m.format("YYYY-MM-DD"),date:m.unix()}))}if(e==="w"){let o=f.unix(n);s=p(0,6).map(i=>o.day(i)).map(i=>({[r]:i.format("MM/DD"),ytd:i.format("YYYY-MM-DD"),date:i.unix()}))}for(let o of s)u.set(o[r],{...o,...a});for(let o of t)u.set(o[r],o);return[...u.values()]}function l(n,t,e,a){let r=a?.difference||0,u=(a?.startOf||f.unix(n).startOf(e).unix())+r,s=(a?.endOf||f.unix(n).endOf(e).unix())+r;return t.filter(o=>o.date>u&&o.date<s)}function A(n,t,e=3600){let a=w(t,e),r=f.unix(n).format("YYYY-MM-DD"),u=f.unix(n).format("MM/DD");return{data:a.find(i=>i.ytd===r)?.data||[],ytd:r,date:n,day:u}}function w(n,t=3600,e=!1){let a=[],r=[...n];r.sort((o,i)=>o.date-i.date);let u=[r[0]].filter(Boolean);for(let o=1;o<r.length;o++)r[o].date-u[u.length-1].date<=t?u.push(r[o]):(a.push(u),u=[r[o]]);if(u.length>0&&a.push(u),e)return a.map(o=>{let i=o.at(-1).date,m=f.unix(i).format("YYYY-MM-DD"),g=f.unix(i).format("MM/DD");return{date:i,data:o,ytd:m,day:g}});let s=new Map;for(let o of a){let i=o.at(-1).date,m=f.unix(i).format("YYYY-MM-DD"),g=f.unix(i).format("MM/DD");(s.get(m)?.data||[]).length>o.length||s.set(m,{data:o,date:i,ytd:m,day:g})}return[...s.values()]}function G(n){return f.unix(n.date).format("YYYY-MM-DD")}export{b as a,B as b,V as c,F as d,I as e,_ as f,O as g,E as h,S as i,j,U as k,k as l,l as m,A as n,w as o,R as p};
